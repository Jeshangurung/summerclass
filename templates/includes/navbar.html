{% load static %}
<style>
/* Apple-Inspired Navbar Styles - High Specificity */
.apple-navbar {
    background-color: rgba(255, 255, 255, 0.95) !important;
    backdrop-filter: blur(20px) !important;
    -webkit-backdrop-filter: blur(20px) !important;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1) !important;
    box-shadow: 0 2px 20px rgba(0, 0, 0, 0.08) !important;
    position: sticky !important;
    top: 0 !important;
    z-index: 1000 !important;
    transition: all 0.3s ease !important;
}

.apple-navbar-top {
    background-color: #f8f9fa !important;
    border-bottom: 1px solid rgba(0, 0, 0, 0.05) !important;
    padding: 8px 0 !important;
    font-size: 0.85rem !important;
}

.apple-navbar-main {
    padding: 1rem 0 !important;
    background-color: rgba(255, 255, 255, 0.98) !important;
}

.apple-nav-link {
    color: #6e6e73 !important;
    font-weight: 500 !important;
    text-decoration: none !important;
    transition: color 0.3s ease !important;
    padding: 0.5rem 1rem !important;
    border-radius: 8px !important;
    font-size: 0.9rem !important;
}

.apple-nav-link:hover {
    color: #000000 !important;
    background-color: rgba(0, 0, 0, 0.05) !important;
    text-decoration: none !important;
}

.apple-brand {
    font-weight: 700 !important;
    color: #000000 !important;
    font-size: 1.5rem !important;
    text-decoration: none !important;
    letter-spacing: -0.02em !important;
    display: flex !important;
    align-items: center !important;
    gap: 0.5rem !important;
}

.apple-brand:hover {
    color: #000000 !important;
    text-decoration: none !important;
}

.apple-logo-img {
    max-height: 40px !important;
    width: auto !important;
    display: block !important;
    object-fit: contain !important;
}

.apple-logo-text {
    font-size: 1.8rem !important;
    font-weight: 800 !important;
    color: #000000 !important;
    text-decoration: none !important;
    letter-spacing: -0.03em !important;
}

.apple-search-container {
    position: relative !important;
    max-width: 400px !important;
    width: 100% !important;
}

.apple-search-input {
    background-color: #f5f5f7 !important;
    border: none !important;
    border-radius: 20px !important;
    padding: 12px 50px 12px 20px !important;
    font-size: 0.9rem !important;
    color: #1d1d1f !important;
    transition: all 0.3s ease !important;
    width: 100% !important;
}

.apple-search-input:focus {
    background-color: #ffffff !important;
    box-shadow: 0 0 0 3px rgba(0, 0, 0, 0.1) !important;
    outline: none !important;
}

.apple-search-btn {
    position: absolute !important;
    right: 8px !important;
    top: 50% !important;
    transform: translateY(-50%) !important;
    background-color: #000000 !important;
    color: white !important;
    border: none !important;
    border-radius: 50% !important;
    width: 36px !important;
    height: 36px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    transition: all 0.3s ease !important;
}

.apple-search-btn:hover {
    background-color: #333333 !important;
    transform: translateY(-50%) scale(1.05) !important;
}

.apple-btn-primary {
    background-color: #000000 !important;
    color: white !important;
    border: none !important;
    border-radius: 20px !important;
    padding: 10px 20px !important;
    font-weight: 600 !important;
    font-size: 0.9rem !important;
    transition: all 0.3s ease !important;
    text-decoration: none !important;
    display: inline-flex !important;
    align-items: center !important;
    gap: 8px !important;
}

.apple-btn-primary:hover {
    background-color: #333333 !important;
    color: white !important;
    transform: translateY(-1px) !important;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15) !important;
    text-decoration: none !important;
}

.apple-btn-outline {
    background-color: transparent !important;
    color: #000000 !important;
    border: 2px solid #000000 !important;
    border-radius: 20px !important;
    padding: 8px 18px !important;
    font-weight: 600 !important;
    font-size: 0.9rem !important;
    transition: all 0.3s ease !important;
    text-decoration: none !important;
    display: inline-flex !important;
    align-items: center !important;
    gap: 8px !important;
}

.apple-btn-outline:hover {
    background-color: #000000 !important;
    color: white !important;
    transform: translateY(-1px) !important;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15) !important;
    text-decoration: none !important;
}

.apple-cart-icon {
    position: relative !important;
    background-color: #f5f5f7 !important;
    border: 2px solid #e5e5e7 !important;
    border-radius: 50% !important;
    width: 44px !important;
    height: 44px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    color: #000000 !important;
    text-decoration: none !important;
    transition: all 0.3s ease !important;
}

.apple-cart-icon:hover {
    background-color: #e5e5e7 !important;
    border-color: #d2d2d7 !important;
    transform: scale(1.05) !important;
    text-decoration: none !important;
    color: #000000 !important;
}

.apple-cart-badge {
    position: absolute !important;
    top: -8px !important;
    right: -8px !important;
    background-color: #ff3b30 !important;
    color: white !important;
    border-radius: 50% !important;
    width: 20px !important;
    height: 20px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    font-size: 0.7rem !important;
    font-weight: 600 !important;
    border: 2px solid white !important;
}

.apple-user-menu {
    display: flex !important;
    align-items: center !important;
    gap: 1rem !important;
}

.apple-user-text {
    color: #86868b !important;
    font-size: 0.8rem !important;
    margin-bottom: 0.25rem !important;
}

.apple-user-links {
    display: flex !important;
    gap: 0.5rem !important;
    align-items: center !important;
}

.apple-user-link {
    color: #000000 !important;
    text-decoration: none !important;
    font-weight: 500 !important;
    font-size: 0.85rem !important;
    transition: color 0.3s ease !important;
}

.apple-user-link:hover {
    color: #333333 !important;
    text-decoration: none !important;
}

.apple-divider {
    color: #d2d2d7 !important;
    font-size: 0.8rem !important;
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .apple-search-container {
        max-width: 100% !important;
        margin: 1rem 0 !important;
    }
    
    .apple-user-menu {
        flex-direction: column !important;
        align-items: flex-start !important;
        gap: 0.5rem !important;
    }
    
    .apple-user-links {
        flex-wrap: wrap !important;
    }
    
    .apple-logo-text {
        font-size: 1.5rem !important;
    }
}
</style>

<header class="apple-navbar">
  <!-- Top Navigation Bar -->
  <nav class="apple-navbar-top">
    <div class="container">
      <div class="row align-items-center">
        <div class="col-md-6">
          <div class="d-flex gap-3">
            <a href="#" class="apple-nav-link">English</a>
            <a href="#" class="apple-nav-link">USD</a>
          </div>
        </div>
        <div class="col-md-6">
          <div class="d-flex justify-content-end gap-3">
            <a href="#" class="apple-nav-link">
              <i class="fa fa-envelope mr-1"></i> Email
            </a>
            <a href="#" class="apple-nav-link">
              <i class="fa fa-phone mr-1"></i> Call us
            </a>
          </div>
        </div>
      </div>
    </div>
  </nav>

  <!-- Main Navigation Bar -->
  <nav class="apple-navbar-main">
    <div class="container">
      <div class="row align-items-center">
        <!-- Logo -->
        <div class="col-lg-2 col-md-3 col-6">
          <a href="{% url 'home' %}" class="apple-brand">
            {% if site_setting.logo %}
              <img src="{{site_setting.logo.url}}" alt="Logo" class="apple-logo-img" />
            {% elif site_setting.default_image %}
              <img src="{{site_setting.default_image.url}}" alt="Logo" class="apple-logo-img" />
            {% else %}
              <span class="apple-logo-text">MARKETPLACE</span>
            {% endif %}
          </a>
        </div>
        
        <!-- Category Dropdown -->
        <div class="col-lg-2 col-md-3 col-6">
          <div class="dropdown">
            <button class="apple-btn-outline dropdown-toggle" type="button" data-toggle="dropdown">
              <i class="fa fa-bars"></i> Categories
            </button>
            <div class="dropdown-menu" style="border-radius: 12px; border: none; box-shadow: 0 8px 32px rgba(0,0,0,0.12); padding: 0.5rem;">
              <a class="dropdown-item" href="{% url 'store' %}" style="border-radius: 8px; margin: 0.25rem 0;">All Products</a>
              {% for category in links %}
              <a class="dropdown-item" href="{{ category.get_url }}" style="border-radius: 8px; margin: 0.25rem 0;">
                {{ category.category_name }}
              </a>
              {% endfor %}
            </div>
          </div>
        </div>
        
        <!-- Store Button -->
        <div class="col-lg-1 col-md-2">
          <a href="{% url 'store' %}" class="apple-btn-primary">
            <i class="fa fa-store"></i> Store
          </a>
        </div>
        
        <!-- Search Bar -->
        <div class="col-lg-4 col-md-6">
          <form action="{%url 'search' %}" method="GET" class="apple-search-container">
            <input
              type="text"
              class="apple-search-input"
              placeholder="Search products..."
              name="keyword"
            />
            <button type="submit" class="apple-search-btn">
              <i class="fa fa-search"></i>
            </button>
          </form>
        </div>
        
        <!-- User Menu and Cart -->
        <div class="col-lg-3 col-md-6">
          <div class="d-flex justify-content-end align-items-center gap-3">
            {% if user.id is None %}
              <div class="apple-user-menu">
                <div>
                  <div class="apple-user-text">Welcome guest!</div>
                  <div class="apple-user-links">
                    <a href="{%url 'user_login'%}" class="apple-user-link">Login</a>
                    <span class="apple-divider">|</span>
                    <a href="{%url 'user_register'%}" class="apple-user-link">Register</a>
                  </div>
                </div>
              </div>
            {% else %}
              <div class="apple-user-menu">
                <div>
                  <div class="apple-user-text">Welcome {{user.first_name}}!</div>
                  <div class="apple-user-links">
                    <a href="{%url 'user_dashboard'%}" class="apple-user-link">Dashboard</a>
                    <span class="apple-divider">|</span>
                    <a href="{%url 'user_logout'%}" class="apple-user-link">Logout</a>
                  </div>
                </div>
              </div>
            {% endif %}
            
            <!-- Cart Icon -->
            <a href="{% url 'cart' %}" class="apple-cart-icon">
              <i class="fa fa-shopping-cart"></i>
              {% if cart_count > 0 %}
                <span class="apple-cart-badge">{{cart_count}}</span>
              {% endif %}
            </a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
